pipeline {
    agent any
    environment {
       tgBot_id = credentials('tgBot_id')
       openai_api_key = credentials('openai_api_key')
       newsApi_key = credentials('newsApi_key')
       newsApi_url = credentials('newsApi_url')
    }

    stages {
       stage('get python and modules'){
            steps {
                sh 'sudo python3-venv /var/lib/jenkins/workspace/newsBot/venv'
                sh 'cd /var/lib/jenkins/workspace/newsBot/venv'
                sh '. bin/activate'
                sh 'pip install -r /var/lib/jenkins/workspace/newsBot/requirements.txt'
                   }
        }
       stage('runBot'){
            steps {
                sh 'echo HELLO'
                sh 'echo ${tgBot_id}'
                sh 'python3 main.py'
                   }
        }
    }
    }