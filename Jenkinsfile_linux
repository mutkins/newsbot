pipeline {
    agent any
    environment {
       tgBot_id = credentials('tgBot_id')
       openai.api_key = credentials('openai.api_key')
       newsApi_key = credentials('newsApi_key')
       newsApi_url = credentials('newsApi_url')
    }

    stages {
       stage('get python and modules'){
            steps {
                sh 'apt update'
                sh 'apt install python3.10 -y'
                sh 'apt install python3-pip -y'
                sh 'pip install -r requirements.txt'
                   }
        }
       stage('runBot'){
            steps {
                sh 'echo HELLO'
                sh 'echo ${tgBot_id}'
                sh 'python3 main.py'
                   }
        }
    }
    }